<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debt System</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:sans-serif;background:#f4f6f9;padding:20px}
.container{max-width:1000px;margin:auto;background:white;padding:20px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,.1)}
input,button{padding:8px;margin:5px;border-radius:8px;border:1px solid #ccc}
button{cursor:pointer;background:#4CAF50;color:white;border:none}
button:hover{opacity:.8}
.danger{background:#e74c3c}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#4CAF50;color:white}
.total{font-weight:bold;margin-top:10px;font-size:18px}
#mainApp{display:none}
</style>
</head>

<body>

<div id="loginBox">
<h2>üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
<input type="password" id="password" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<div class="container" id="mainApp">
<h2>üí∞ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏´‡∏ô‡∏µ‡πâ</h2>

<input type="text" id="debtorId" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ">
<input type="text" id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠">
<input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
<input type="date" id="date">
<button onclick="addDebt()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
<button onclick="clearAll()" class="danger">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

<table>
<thead>
<tr>
<th>‡∏£‡∏´‡∏±‡∏™</th>
<th>‡∏ä‡∏∑‡πà‡∏≠</th>
<th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</th>
<th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
<th>‡∏•‡∏ö</th>
</tr>
</thead>
<tbody id="debtTable"></tbody>
</table>

<div class="total" id="totalAmount"></div>
<div id="summaryByPerson"></div>

<h3>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ï‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</h3>
<canvas id="chart"></canvas>

</div>

<script>
const APP_PASSWORD="12345";
let debts=JSON.parse(localStorage.getItem("debts"))||[];

function login(){
const pass=document.getElementById("password").value;
if(pass===APP_PASSWORD){
document.getElementById("loginBox").style.display="none";
document.getElementById("mainApp").style.display="block";
renderTable();
}else{
alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î");
}
}

function save(){
localStorage.setItem("debts",JSON.stringify(debts));
}

function addDebt(){
const debtorId=document.getElementById("debtorId").value.trim();
const name=document.getElementById("name").value.trim();
const amount=Number(document.getElementById("amount").value);
const date=document.getElementById("date").value;

if(!debtorId||!name||!amount||!date){
alert("‡∏Å‡∏£‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
return;
}

debts.push({debtorId,name,amount,date});
save();
renderTable();

document.getElementById("debtorId").value="";
document.getElementById("name").value="";
document.getElementById("amount").value="";
document.getElementById("date").value="";
}

function deleteDebt(index){
debts.splice(index,1);
save();
renderTable();
}

function clearAll(){
if(confirm("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?")){
debts=[];
save();
renderTable();
}
}

function renderTable(){
const table=document.getElementById("debtTable");
table.innerHTML="";
let total=0;

debts.forEach((d,i)=>{
total+=d.amount;
table.innerHTML+=`
<tr>
<td>${d.debtorId}</td>
<td>${d.name}</td>
<td>${d.amount.toLocaleString()}</td>
<td>${d.date}</td>
<td><button class="danger" onclick="deleteDebt(${i})">‡∏•‡∏ö</button></td>
</tr>`;
});

document.getElementById("totalAmount").innerText="‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: "+total.toLocaleString()+" ‡∏ö‡∏≤‡∏ó";

renderSummary();
renderChart();
}

function renderSummary(){
const summary={};
debts.forEach(d=>{
summary[d.name]=(summary[d.name]||0)+d.amount;
});

let html="<h3>üìå ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡∏Ñ‡∏ô</h3>";
for(let name in summary){
html+=name+" : "+summary[name].toLocaleString()+" ‡∏ö‡∏≤‡∏ó<br>";
}
document.getElementById("summaryByPerson").innerHTML=html;
}

function renderChart(){
const summary={};
debts.forEach(d=>{
summary[d.name]=(summary[d.name]||0)+d.amount;
});

const ctx=document.getElementById("chart").getContext("2d");
new Chart(ctx,{
type:"bar",
data:{
labels:Object.keys(summary),
datasets:[{
label:"‡∏¢‡∏≠‡∏î‡∏´‡∏ô‡∏µ‡πâ",
data:Object.values(summary)
}]
}
});
}
</script>
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyC29uT6n-xKSCZ_2lwiLmbuvjn9Bf4qYqQ",
  authDomain: "zaysai.firebaseapp.com",
  projectId: "zaysai",
  storageBucket: "zaysai.firebasestorage.app",
  messagingSenderId: "868257719461",
  appId: "1:868257719461:web:7e61d7c63cadd03dcc994c",
  measurementId: "G-V6BD88DLLZ"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
</body>
</html>
